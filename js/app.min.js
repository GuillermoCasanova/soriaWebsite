"use strict";function initBackToTopButton(){$('[data-action="go-to-top"]').on("click",function(){return $("body, html").animate({scrollTop:0},800),!1})}var app=function(document,$){var docElem=document.documentElement,_userAgentInit=function(){docElem.setAttribute("data-useragent",navigator.userAgent)},_init=function(){$(document).foundation(),_userAgentInit(),$(function(){FastClick.attach(document.body)})};return{init:_init}}(document,jQuery);!function(){app.init()}(),$("[data-action='load-services-side-nav']").length>0&&$("[data-action='load-services-side-nav']").load("components/nav--services.html"),$("[data-action='load-footer']").length>0&&$("[data-action='load-footer']").load("components/footer.html");var activeMap="sanjuan";$("[data-action='load-map']").length>0&&$("[data-action='load-map']").on("click",function(pLocation){var location=$(this).attr("map");activeMap!==location&&($("[ data-ui-component='map-container']").load("components/map--"+location+".html"),activeMap=location)}),$(document).on("ready",function(){var controller=new ScrollMagic.Controller;if($('[data-action="pin-element-to-top"]')&&!$("html").hasClass("touch"))for(var slides=document.querySelectorAll('[data-action="pin-element-to-top"]'),i=0;i<slides.length;i++)new ScrollMagic.Scene({triggerElement:slides[i],triggerHook:"onLeave"}).setPin(slides[i]).addTo(controller);if($("[data-action='bring-in-services']").length>0){var enterFromBottom=TweenMax.staggerFromTo("#services .enter-from-bottom",.6,{opacity:0,y:300},{opacity:1,y:0},.4);new ScrollMagic.Scene({triggerElement:"[data-action='bring-in-services']",reverse:!1}).setTween(enterFromBottom).addTo(controller)}if($("[data-action='fade-in-characteristics']").length>0){var fadeIn=TweenMax.staggerTo(".fade-in",.6,{opacity:1},.4);new ScrollMagic.Scene({triggerElement:"[data-action='fade-in-characteristics']",reverse:!1}).setTween(fadeIn).addTo(controller)}if($("[data-action='fade-in-locations']").length>0){var fadeIn=TweenMax.staggerTo(".fade-in",.6,{opacity:1},.4);new ScrollMagic.Scene({triggerElement:"[data-action='fade-in-characteristics']",reverse:!1}).setTween(fadeIn).addTo(controller)}if($("[data-action='bring-in-header']").length>0){var enterFromBottom=TweenMax.staggerFromTo('[data-action="bring-in-header"] .enter-from-bottom',.6,{opacity:0,y:300},{opacity:1,y:0},.4);new ScrollMagic.Scene({triggerElement:"[data-action='bring-in-header']",reverse:!1}).setTween(enterFromBottom).addTo(controller)}if($("[data-action='bring-in-biografia']").length>0){var enterFromBottom=TweenMax.staggerFromTo("#biografia .enter-from-bottom",.6,{opacity:0,y:300},{opacity:1,y:0},.4);new ScrollMagic.Scene({triggerElement:"[data-action='bring-in-biografia']",reverse:!1}).setTween(enterFromBottom).addTo(controller)}if($("[data-action='fade-in-list']").length>0){var fadeIn=TweenMax.staggerTo("#plan .fadeIn",.6,{opacity:1},.4);new ScrollMagic.Scene({triggerElement:"[data-action='fade-in-list']",reverse:!1}).setTween(fadeIn).addTo(controller)}if($('[data-action="scroll-to-section"]').length>0){new ScrollMagic.Scene({triggerElement:'[data-ui-component="smoothScroll-nav"]',duration:200,triggerHook:"onLeave"}).addTo(controller);controller.scrollTo(function(newpos){TweenMax.to(window,.6,{scrollTo:{y:newpos}})}),$('[data-action="scroll-to-section"]').on("click",function(e){var id=$(this).attr("href");$(id).length>0&&(e.preventDefault(),controller.scrollTo(id),window.history&&window.history.pushState&&history.pushState("",document.title,id))});for(var sections=document.querySelectorAll('[data-ui-component="smoothScroll-link"]'),i=0,l=sections.length;l>i;i++){var section=$(sections[i]).attr("href"),sectionHeight=$(section).height(),anchorLink=$(section+"-anchor").parent().get(0);new ScrollMagic.Scene({triggerElement:section,duration:sectionHeight}).setClassToggle(anchorLink,"is-active").addTo(controller)}}if($("[data-action='fade-in-copy']").length>0){var fadeInCopy=TweenMax.staggerTo(".fadeIn",.6,{opacity:1},.4);new ScrollMagic.Scene({triggerElement:"[data-action='fade-in-copy']",reverse:!1}).setTween(fadeInCopy).addTo(controller)}$("[data-ui-component='fixed-tab']").length>0&&$("[data-action='show-fixed-tab']").length>0&&new ScrollMagic.Scene({triggerElement:"[data-action='show-fixed-tab']"}).setClassToggle("[data-ui-component='fixed-tab']","is-visible").addTo(controller),$('[data-action="toggle-top-bar"]').length>0&&!function($){var currentScroll,prevScroll=0,navBar=$('[data-action="toggle-top-bar"]'),navBarHeight=navBar.height(),didScroll=!1,theWindow=$(window);$(window).scroll(function(){didScroll=!0}),setInterval(function(){didScroll&&(didScroll=!1,currentScroll=theWindow.scrollTop(),navBarHeight>currentScroll&&(setTimeout(function(){},500),navBar.removeClass("is-alt")),prevScroll>currentScroll&&(navBar.removeClass("is-hidden"),navBar.addClass("is-fixed")),currentScroll>prevScroll&&(navBar.removeClass("is-fixed"),navBar.addClass("is-hidden")),navBar.hasClass("is-fixed")&&currentScroll>navBarHeight&&navBar.addClass("is-alt"),prevScroll=currentScroll)},300)}(jQuery),$('[data-action="lazy-load-img"]').lazyload({threshold:200,effect:"fadeIn",duration:10}),$('[data-action="flip-panel"]').on("click  ontouchstart",function(e){e.stopPropagation(),$(this).toggleClass("is-selected")}),$('[data-action="toggle-profile-bio"]').on("click  focus",function(e){var bioProfile=$(this).parents(".profile");e.stopPropagation(),e.preventDefault(),bioProfile.toggleClass("is-showing")}),$('[data-action="load-map"]').on("click",function(e){e.stopPropagation(),e.preventDefault();var toggleMapButton=$('[data-ui-component="toggle-map-button"]');$('[data-ui-component="contact-info"]').toggleClass("is-hidden"),$('[data-ui-component="map"]').toggleClass("is-visible"),$('[data-ui-component="map-cover"]').toggleClass("is-hidden"),toggleMapButton.hasClass("is-visible")?toggleMapButton.toggleClass("is-visible"):setTimeout(function(){toggleMapButton.toggleClass("is-visible")},600)})}),$(function(){var form=$("[data-ui-component='contact-form']"),formMessages=$("[data-ui-component='form-message']");$(form).submit(function(e){e.preventDefault();var formData=$(form).serialize();$.ajax({type:"POST",url:$(form).attr("action"),data:formData}).done(function(){$(formMessages).toggleClass("is-visible"),$(form).addClass("is-hidden"),$("#name").val(""),$("#email").val(""),$("#messages").val("")}).fail(function(data){""!==data.responseText?$(formMessages).text(data.responseText):$(formMessages).text("An error occured and your message could not be sent. Please try again in a few seconds.")})})});